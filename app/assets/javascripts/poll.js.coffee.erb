#= require lib/module

class window.Poll extends Module
  @default: <%= Configuration.poll.default %>
  @initialize: ->
    $(document).ready ->
      $('[data-poll]').each (_, element) ->
        seconds = parseInt($(element).attr('data-poll'))

        seconds = Poll.default unless seconds > 0
        location = $(element).attr('data-rel')

        setTimeout (-> $(element).attr('href', location).trigger('click') if jQuery.active == 0), seconds * 1000
